<!DOCTYPE html>
<html lang="en">
<head>
  <title>Ribbon theme for Shower</title>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
  <!-- inject:css -->
  <!-- endinject -->
</head>
<body class="list">
  <header class="caption">
    <h1>Angular and Rails - Marriage or Divorce?</h1>
    <p>by <a href="http://denbuzze.com">@denbuzze</a></p>
  </header>
  <section class="slide intro"><div>
    <div class="intro-headers">
      <h2>Angular<br/>&amp;<br/>Rails</h2>
      <h3>Marriage or Divorce?</h3>
    </div>
    <div class="footer">
      <span class="text-light">by</span>
      <a href="https://twitter.com/denbuzze">@denbuzze</a>
      <span class="text-light">at</span>
      <a href="https://twitter.com/hashtag/HTML5DevConf">#html5devconf</a>
    </div>
    <canvas id="intro-canvas"></canvas>
    <style>
    #intro-canvas {
      position: absolute;
      width: 100%;
      top: 0;
      left: 0;
      height: 100%;
      bottom: 0;
    }
    .intro {
      background-color: #c1272d;
      color: #fff;
      text-align: center;
    }
    .intro>div {
      padding: 0;
      width: 100%;
      height: 100%;
    }
    .intro h2 {
      color: #fff;
      font-size: 100px;
    }
    .intro h3 {
      font-size: 60px;
    }
    .intro-headers {
      margin-top: 60px;
    }
    .intro .footer {
      background-color: rgba(0, 0, 0, 0.2);
      bottom: 0;
      font-size: 40px;
      position: absolute;
      width: 100%;
    }
    .intro .footer a {
      color: #fff;
      opacity: .8;
      text-decoration: none;
    }
    .intro .footer a:hover, .intro .footer a:focus {
      text-decoration: underline;
    }
    .text-light {
      opacity: .4;
    }
    </style>
    <script>
      // http://paulirish.com/2011/requestanimationframe-for-smart-animating/
      // http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating

      // requestAnimationFrame polyfill by Erik MÃ¶ller. fixes from Paul Irish and Tino Zijdel

      // MIT license

      (function() {
        var lastTime = 0;
        var vendors = ['ms', 'moz', 'webkit', 'o'];
        for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {
          window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];
          window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] ||
            window[vendors[x] + 'CancelRequestAnimationFrame'];
        }

        if (!window.requestAnimationFrame) {
          window.requestAnimationFrame = function(callback, element) {
            var currTime = new Date().getTime();
            var timeToCall = Math.max(0, 16 - (currTime - lastTime));
            var id = window.setTimeout(function() {
              callback(currTime + timeToCall);
            }, timeToCall);
            lastTime = currTime + timeToCall;
            return id;
          };
        }
        if (!window.cancelAnimationFrame) {
          window.cancelAnimationFrame = function(id) {
            clearTimeout(id);
          };
        }
      }());

      // Test
      (function() {

        var width, height, canvas, ctx, circles, target, animateHeader = true;

        // Main
        initHeader();
        addListeners();

        function initHeader() {


          canvas = document.getElementById('intro-canvas');
          resize();
          ctx = canvas.getContext('2d');

          // create particles
          circles = [];
          for(var x = 0; x < width*0.5; x++) {
              var c = new Circle();
              circles.push(c);
          }
          animate();
        }

        // Event handling
        function addListeners() {
            window.addEventListener('scroll', scrollCheck);
            window.addEventListener('resize', resize);
        }

        function scrollCheck() {
            if(document.body.scrollTop > height) animateHeader = false;
            else animateHeader = true;
        }

        function scale() {
          var denominator = Math.max(
            document.body.clientWidth / window.innerWidth,
            document.body.clientHeight / window.innerHeight
          );

          return 1 / denominator;
        };

        function resize() {
          var scaleI = scale();
            width = window.innerWidth;
            height = scaleI < 1 ? window.innerHeight * scaleI : window.innerHeight;
            canvas.width = width;
            canvas.height = height;
        }

        function animate() {
            if(animateHeader) {
                ctx.clearRect(0,0,width,height);
                for(var i in circles) {
                    circles[i].draw();
                }
            }
            requestAnimationFrame(animate);
        }

        // Canvas manipulation
        function Circle() {
            var _this = this;

            // constructor
            (function() {
                _this.pos = {};
                init();
            })();

            function init() {
                _this.pos.x = Math.random()*width;
                _this.pos.y = height+Math.random()*100;
                _this.alpha = 0.1+Math.random()*0.3;
                _this.scale = 0.1+Math.random()*0.3;
                _this.velocity = Math.random();
            }

            this.draw = function() {
                if(_this.alpha <= 0) {
                    init();
                }
                _this.pos.y -= _this.velocity;
                _this.alpha -= 0.0005;
                ctx.beginPath();
                ctx.arc(_this.pos.x, _this.pos.y, _this.scale*15, 0, 2 * Math.PI, false);
                ctx.fillStyle = 'rgba(255,255,255,'+ _this.alpha+')';
                ctx.fill();
            };
        }

    })();

    </script>
  </div></section>
  <section class="slide cover"><div>
  </div></section>
  <!-- inject:js -->
  <script src="/src/js/shower.min.js"></script>
  <!-- endinject -->
</body>
</html>
